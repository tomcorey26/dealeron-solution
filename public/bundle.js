(()=>{"use strict";const e=(e,r)=>{let t=[];for(let i=0;i<=r;i++){let r=[];for(let t=0;t<=e;t++)r.push(null);t.push(r)}return t};class r{static displayError(e){alert(e)}static renderGrid(e){let r=document.getElementById("grid"),t="";e.forEach((e=>{t+='<div class="row">',e.forEach((e=>{if(e){let r;"S"===e.dir?r="v":"N"===e.dir?r="^":"E"===e.dir?r=">":"W"===e.dir&&(r="<"),t+=`<div class="square"><div class="rover">${r}</div> </div>`}else t+='<div class="square"> </div>'})),t+="</div>"})),r.innerHTML=t}static renderRoverResult(e){const r=document.getElementById("rover-output"),t=`Rover ${document.querySelectorAll(".rover-position").length+1}: ${e.x} ${e.y} ${e.dir}`,i=document.createElement("div");i.className="rover-position",i.innerText=t,r.appendChild(i)}static clearRoverResults(){const e=document.getElementsByClassName("rover-position");for(;e[0];)e[0].parentNode&&e[0].parentNode.removeChild(e[0])}}var t=function(e,r,t,i){return new(t||(t=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function l(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,l)}c((i=i.apply(e,r||[])).next())}))};class i{constructor(i,n){this.printGrid=()=>{this.grid.forEach((e=>{console.log(e)}))},this.resetGrid=()=>{this.grid=e(this.l,this.w)},this.renderRoverOnGrid=e=>t(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,100))),this.resetGrid();const t=this.grid.length-1;this.grid[t-e.y][e.x]=e,r.renderGrid(this.grid)})),this.exploreGrid=e=>t(this,void 0,void 0,(function*(){yield this.renderRoverOnGrid(e);for(let r=0;r<e.instructions.length;r++){const t=e.instructions[r];"L"===t||"R"===t?e.changeDirection(t):e.moveRover(this.l,this.w),yield this.renderRoverOnGrid(e)}})),this.grid=e(i,n),this.l=i,this.w=n}}const n={N:!0,E:!0,S:!0,W:!0},s={M:!0,L:!0,R:!0},o=(e,r,t)=>{const i=r%2!=0&&0!==r;let o;return o=0===r?(e=>{e.length>2&&alert(`Error: ${e.length} inputs provided for corner, only 2 required (check for extra spaces)`),e.length<2&&alert(`Error: ${e.length} inputs provided for corner,2 required (check for extra spaces)`);for(let r=0;r<e.length;r++){let t=e[r];if(isNaN(t))return alert(`Incorrect corner position input ${t}, please pass numbers only`),!1;if(Number(t)<0)return alert("Please provide positve numbers"),!1}return!0})(e):i?((e,r)=>{e.length>3&&alert(`Error: ${e.length} inputs provided for rover position, only 3 required`);const t=e[0],i=e[1],s=e[2];return isNaN(t)||isNaN(i)?(alert(`Incorrect rover position input (${t},${i}), please pass numbers only (check for extra spaces)`),!1):Number(t)<0||Number(i)<0?(alert("Please provide positve numbers"),!1):Number(t)>r.w||Number(i)>r.l?(console.log(r),alert("Rover coordinates out of bounds"),!1):s in n||(alert(`Incorrect rover direction input (${s}), please pass NESW only `),!1)})(e,t):(e=>{let r=e[0];for(let e=0;e<r.length;e++){let t=r[e];if(!(t in s))return alert(`Incorrect corner rover movement input ${t}, please pass MRL only`),!1}return!0})(e),o};class l{constructor(e){this.startPosition=e.startPosition,this.instructions=e.instructions,this.dir=e.dir,this.x=e.x,this.y=e.y}changeDirection(e){if("L"===e)switch(this.dir){case"E":this.dir="N";break;case"N":this.dir="W";break;case"S":this.dir="E";break;case"W":this.dir="S"}else switch(this.dir){case"E":this.dir="S";break;case"N":this.dir="E";break;case"S":this.dir="W";break;case"W":this.dir="N"}}moveRover(e,r){switch(this.dir){case"E":this.x!==e&&(this.x+=1);break;case"N":this.y!==r&&(this.y+=1);break;case"S":0!==this.y&&(this.y-=1);break;case"W":0!==this.x&&(this.x-=1)}}}const c=document.querySelector("form");c.addEventListener("submit",(e=>{e.preventDefault();const r=(e=>{const r=e.querySelector("textarea").value.trim().split("\n");if(r.length<4)return alert(`only ${r.length} inputs given, 4 or more required`),null;if((r.length-1)%2!=0)return alert("Missing Rover instructions or position"),null;let t=[];console.log(r[0]);const i={w:Number(r[0].split(" ")[0]),l:Number(r[0].split(" ")[1])};for(let e=0;e<r.length;e++){const n=r[e].split(" ");if(!o(n,e,i))return null;t.push(n)}return t})(c);r&&a(r)}));const a=e=>{return t=void 0,n=void 0,o=function*(){r.clearRoverResults();const t=e[0],n=Number(t[0]),s=Number(t[1]);let{grid:o,exploreGrid:c}=new i(n,s);r.renderGrid(o);const a=(e=>{let r=[];for(let t=1;t<e.length;t+=2){const i=e[t],n=Number(i[0]),s=Number(i[1]),o=i[2],c=e[t+1][0],a=new l({startPosition:{x:n,y:s},instructions:c,dir:o,x:n,y:s});r.push(a)}return r})(e);for(let e=0;e<a.length;e++)yield c(a[e]),r.renderRoverResult(a[e])},new((s=void 0)||(s=Promise))((function(e,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(r){var t;r.done?e(r.value):(t=r.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,l)}c((o=o.apply(t,n||[])).next())}));var t,n,s,o}})();